<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="generator" content="TiddlyWiki" />
<meta name="tiddlywiki-version" content="5.3.2-prerelease" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="format-detection" content="telephone=no">
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="static.css">
<title>Using the external JavaScript template: TiddlyWiki — Cuaderno de notas personal no-lineal en la web</title>
</head>
<body class="tc-body">
<p><div class="tc-static-alert"><div class="tc-static-alert-inner">This page is part of a static HTML representation of the TiddlyWiki at <a class="tc-tiddlylink-external" href="https://tiddlywiki.com/" rel="noopener noreferrer" target="_blank">https://tiddlywiki.com/</a></div></div>
</p>
<section class="tc-story-river tc-static-story-river">
<p><div class="tc-tiddler-frame tc-tiddler-view-frame tc-tiddler-exists  tc-tagged-WebServer%20Guides" data-tags="[[WebServer Guides]]" data-tiddler-title="Using the external JavaScript template" role="article"><div class="tc-tiddler-title">
<div class="tc-titlebar">
<span class="tc-tiddler-controls">
<span class=" tc-reveal"><button aria-expanded="false" aria-label="Más" class="tc-btn-invisible" title="Otras acciones"></button><div class=" tc-reveal" hidden="true"></div></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal"><button aria-label="Editar" class="tc-btn-invisible" title="Permite editar este tiddler"></button></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal"><button aria-label="Cerrar" class="tc-btn-invisible" title="Cierra este tiddler"></button></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span>
</span>

<span>

<span class="tc-tiddler-title-icon" style="fill:;">

</span>



<h2 class="tc-title">

Using the external JavaScript template

</h2>

</span>

</div>

<div class="tc-tiddler-info tc-popup-handle tc-reveal" hidden="true"></div>
</div><div class="tc-reveal"></div><div class=" tc-reveal"><div class="tc-subtitle"><a class="tc-tiddlylink tc-tiddlylink-missing" href=".html"></a> 19 marzo 2023 a las 13:08</div></div><div class=" tc-reveal"><div class="tc-tags-wrapper"><span class="tc-tag-list-item">


<button aria-expanded="false" class="tc-btn-invisible tc-tag-label" style="background-color:;
fill:#333333;
color:#333333;">
 WebServer Guides
</button>
<span class=" tc-reveal" hidden="true"></span>


</span></div></div>






<div class="tc-tiddler-body tc-reveal"><p>You can use a special template to externalise TiddlyWiki's core code into a separate file. This configuration allows the browser to cache the core for improved efficiency. </p><h1 class="">Background</h1><p>TiddlyWiki in the single file configuration ordinarily packs everything into a single file: your data, and the JavaScript, CSS and HTML comprising TiddlyWiki itself. This lack of dependencies is usually very convenient: it means that it is impossible for the parts of a TiddlyWiki to become separated, and enormously improves the chances of it still functioning in the future.</p><p>However, there is some inefficiency in this arrangement because the core code is repeatedly loaded and saved every time the content of the wiki is saved. This inefficiency is partially ameliorated when working in the client server configuration because once the wiki is loaded by the browser the synchronisation process only transmits individual tiddlers back and forth to the server.</p><p>The remaining inefficiency when working in the client server configuration is that the single page wiki that is initially loaded will contain a copy of the entire core code of TiddlyWiki, making it impossible for the browser to cache it.</p><h1 class="">Using the external JavaScript template with the client-server configuration</h1><p>The mechanism is activated by setting the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="WebServer%2520Parameter%253A%2520root-tiddler.html">root-tiddler</a> parameter to <code>$:/core/save/all-external-js</code>. This template externalises TiddlyWiki's core JavaScript into a separate file. For example, the following command will start your server with caching enabled. It will transfer the wiki with two GET requests, and the core can be cached by the browser.</p><pre><code>tiddlywiki YOUR_WIKI_FOLDER --listen 'root-tiddler=$:/core/save/all-external-js' use-browser-cache=yes</code></pre><p><div class="doc-icon-block"><div class="doc-block-icon"><svg class="tc-image-tip tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><path d="M64 128.242c35.346 0 64-28.654 64-64 0-35.346-28.654-64-64-64-35.346 0-64 28.654-64 64 0 35.346 28.654 64 64 64zm11.936-36.789c-.624 4.129-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349C54.33 94.05 58.824 95.82 64 95.82c5.175 0 9.67-1.769 11.936-4.366zm0 4.492c-.624 4.13-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349 2.266 2.597 6.76 4.366 11.936 4.366 5.175 0 9.67-1.769 11.936-4.366zm0 4.456c-.624 4.129-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349 2.266 2.597 6.76 4.366 11.936 4.366 5.175 0 9.67-1.769 11.936-4.366zm0 4.492c-.624 4.13-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349 2.266 2.597 6.76 4.366 11.936 4.366 5.175 0 9.67-1.769 11.936-4.366zM64.3 24.242c11.618 0 23.699 7.82 23.699 24.2S75.92 71.754 75.92 83.576c0 5.873-5.868 9.26-11.92 9.26s-12.027-3.006-12.027-9.26C51.973 71.147 40 65.47 40 48.442s12.683-24.2 24.301-24.2z" fill-rule="evenodd"></path></svg></div> You can activate your browser's <strong>Developer Tools: Network</strong> tab and reload the page to see how it works.</div></p><p><div class="doc-icon-block"><div class="doc-block-icon"><svg class="tc-image-tip tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><path d="M64 128.242c35.346 0 64-28.654 64-64 0-35.346-28.654-64-64-64-35.346 0-64 28.654-64 64 0 35.346 28.654 64 64 64zm11.936-36.789c-.624 4.129-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349C54.33 94.05 58.824 95.82 64 95.82c5.175 0 9.67-1.769 11.936-4.366zm0 4.492c-.624 4.13-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349 2.266 2.597 6.76 4.366 11.936 4.366 5.175 0 9.67-1.769 11.936-4.366zm0 4.456c-.624 4.129-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349 2.266 2.597 6.76 4.366 11.936 4.366 5.175 0 9.67-1.769 11.936-4.366zm0 4.492c-.624 4.13-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349 2.266 2.597 6.76 4.366 11.936 4.366 5.175 0 9.67-1.769 11.936-4.366zM64.3 24.242c11.618 0 23.699 7.82 23.699 24.2S75.92 71.754 75.92 83.576c0 5.873-5.868 9.26-11.92 9.26s-12.027-3.006-12.027-9.26C51.973 71.147 40 65.47 40 48.442s12.683-24.2 24.301-24.2z" fill-rule="evenodd"></path></svg></div> On Windows, Command Prompt (CMD) users need to replace single quotes <code>'</code> with double quotation marks <code>"</code>.</div></p><h2 class="">Initialising a new wiki</h2><p>The provided edition <code>server-external-js</code> contains all the configuration necessary to use the external JavaScript template. Here is an example:</p><pre><code>tiddlywiki ./myNewWiki --init server-external-js
tiddlywiki ./myNewWiki --build listen</code></pre><p>The above commands perform the following:</p><ul><li>Create a new wiki with external <a class="tc-tiddlylink tc-tiddlylink-resolves" href="JavaScript.html">JavaScript</a> customisation included.</li><li>Start the server with external JavaScript enabled. The server listens on port 8080. Visit <a class="tc-tiddlylink-external" href="http://localhost:8080" rel="noopener noreferrer" target="_blank">http://localhost:8080</a> in your browser.</li></ul><p>To customise your <code>--build listen</code> command, see <a class="tc-tiddlylink tc-tiddlylink-resolves" href="tiddlywiki.info%2520Files.html">tiddlywiki.info Files</a> and <a class="tc-tiddlylink tc-tiddlylink-resolves" href="ListenCommand.html">ListenCommand</a>.</p><h1 class="">Using the external JavaScript template with the single file configuration</h1><p>You can use the "external-js" template with your single file wiki, but this requires that you have TiddlyWiki's core JavaScript saved alongside your HTML file. You may prefer this configuration, for example, if you have several wikis on a WebDav server. (See: <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Saving%2520via%2520WebDAV.html">Saving via WebDAV</a>)</p><p><div class="doc-icon-block"><div class="doc-block-icon"><svg class="tc-image-warning tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><path d="M57.072 11c3.079-5.333 10.777-5.333 13.856 0l55.426 96c3.079 5.333-.77 12-6.928 12H8.574c-6.158 0-10.007-6.667-6.928-12l55.426-96zM64 37c-4.418 0-8 3.582-8 7.994v28.012C56 77.421 59.59 81 64 81c4.418 0 8-3.582 8-7.994V44.994C72 40.579 68.41 37 64 37zm0 67a8 8 0 100-16 8 8 0 000 16z" fill-rule="evenodd"></path></svg></div> This functionality is intended for advanced users: there are many more ways for things to go wrong than with the standard single file configuration</div></p><h2 class="">Saving your snapshots</h2><p>If you start your TiddlyWiki server in the "external-js" configuration, snapshots you save from the wiki will also have the external-js configuration.</p><p>You can click on the "cloud" button and choose <span class="doc-icon"><svg class="tc-image-download-button tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><g fill-rule="evenodd"><path class="tc-image-download-button-ring" d="M64 128c35.346 0 64-28.654 64-64 0-35.346-28.654-64-64-64C28.654 0 0 28.654 0 64c0 35.346 28.654 64 64 64zm0-16c26.51 0 48-21.49 48-48S90.51 16 64 16 16 37.49 16 64s21.49 48 48 48z"></path><path d="M34.35 66.43l26.892 27.205a4.57 4.57 0 006.516 0L94.65 66.43a4.7 4.7 0 000-6.593 4.581 4.581 0 00-3.258-1.365h-8.46c-2.545 0-4.608-2.087-4.608-4.661v-15.15c0-2.575-2.063-4.662-4.608-4.662H55.284c-2.545 0-4.608 2.087-4.608 4.662v15.15c0 2.574-2.063 4.661-4.608 4.661h-8.46c-2.545 0-4.608 2.087-4.608 4.662a4.69 4.69 0 001.35 3.296z"></path></g></svg></span>  <strong>Save snapshot for offline use</strong>. The html wiki you saved will have a reduced file size compared to a regular snapshot because the TiddlyWiki core code has been externalised. However, to be able to use this wiki, you <strong>must</strong> also have a copy of TiddlyWiki's core JavaScript in the same directory; see below for instructions for obtaining it</p><p>The "server-external-js" edition lets you save the snapshot from the command line:</p><pre><code>tiddlywiki YOUR_WIKI_FOLDER --build index</code></pre><p>The files <code>external-5-x-x.html</code> and <code>tiddlywikicore-5.x.x.js</code> will be saved in your wiki folder's <code>output</code> directory.</p><h2 class="">Obtaining the TiddlyWiki core in the browser</h2><p><strong>For advanced users</strong></p><p>Export the TiddlyWiki core JavaScript code for running with external JavaScript:</p><p><button aria-label="export TiddlyWiki core" class="tc-btn-big-green" title="Export the ~TiddlyWiki core code for running with external ~JavaScript">

<svg class="tc-image-download-button tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><g fill-rule="evenodd"><path class="tc-image-download-button-ring" d="M64 128c35.346 0 64-28.654 64-64 0-35.346-28.654-64-64-64C28.654 0 0 28.654 0 64c0 35.346 28.654 64 64 64zm0-16c26.51 0 48-21.49 48-48S90.51 16 64 16 16 37.49 16 64s21.49 48 48 48z"></path><path d="M34.35 66.43l26.892 27.205a4.57 4.57 0 006.516 0L94.65 66.43a4.7 4.7 0 000-6.593 4.581 4.581 0 00-3.258-1.365h-8.46c-2.545 0-4.608-2.087-4.608-4.661v-15.15c0-2.575-2.063-4.662-4.608-4.662H55.284c-2.545 0-4.608 2.087-4.608 4.662v15.15c0 2.574-2.063 4.661-4.608 4.661h-8.46c-2.545 0-4.608 2.087-4.608 4.662a4.69 4.69 0 001.35 3.296z"></path></g></svg> Download TiddlyWiki core
</button></p><p><a class="tc-tiddlylink-external" href="https://tiddlywiki.com/#Using%20the%20external%20JavaScript%20template" rel="noopener noreferrer" target="_blank">Further information</a>
</p><h2 class="">Obtaining the TiddlyWiki core with Node.js</h2><p>You can also run the following command to obtain the core JavaScript. The file <code>tiddlywikicore-5.x.x.js</code> will be saved in the<code>output</code> directory of your wiki folder:</p><pre><code>tiddlywiki YOUR_WIKI_FOLDER \
    --render '$:/core/templates/tiddlywiki5.js' \
    '[[tiddlywikicore-]addsuffix&lt;version&gt;addsuffix[.js]]' \
    'text/plain'</code></pre><p>The "server-external-js" edition has a shortcut for the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="BuildCommand.html">BuildCommand</a> to do the same thing:</p><pre><code>tiddlywiki YOUR_WIKI_FOLDER --build tiddlywikicore</code></pre><h1 class="">Upgrading your standalone wiki</h1><p><div class="doc-icon-block"><div class="doc-block-icon"><svg class="tc-image-warning tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><path d="M57.072 11c3.079-5.333 10.777-5.333 13.856 0l55.426 96c3.079 5.333-.77 12-6.928 12H8.574c-6.158 0-10.007-6.667-6.928-12l55.426-96zM64 37c-4.418 0-8 3.582-8 7.994v28.012C56 77.421 59.59 81 64 81c4.418 0 8-3.582 8-7.994V44.994C72 40.579 68.41 37 64 37zm0 67a8 8 0 100-16 8 8 0 000 16z" fill-rule="evenodd"></path></svg></div> This procedure is experimental, please take care to backup your data</div></p><p>Before you proceed, backup your wiki first! Follow the steps below to upgrade a single-file wiki with the external JavaScript template:</p><ol><li>Proceed with the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Upgrading.html">Upgrade Process for Standalone TiddlyWikis</a>. Your wiki will be converted to a full standalone HTML.</li><li>Open your upgraded wiki in the browser. If you'd like to revert to using the regular template, restore the original shadow tiddler <code>$:/config/SaveWikiButton/Template</code> by deleting any custom copy. Save your wiki and you are done. </li><li>Otherwise, from your wiki, select the <strong>Tools</strong> tab from the sidebar and click on the <span class="doc-icon"><svg class="tc-image-star-filled tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><path d="M61.836 96.823l37.327 27.287c2.72 1.99 6.379-.69 5.343-3.912L90.29 75.988l-1.26 3.91 37.285-27.345c2.718-1.993 1.32-6.327-2.041-6.33l-46.113-.036 3.3 2.416L67.176 4.416c-1.04-3.221-5.563-3.221-6.604 0L46.29 48.603l3.3-2.416-46.113.036c-3.362.003-4.759 4.337-2.04 6.33L38.72 79.898l-1.26-3.91-14.216 44.21c-1.036 3.223 2.622 5.901 5.343 3.912l37.326-27.287h-4.078z"></path></svg></span> <strong>export tiddlywiki core</strong> button to obtain the core from your wiki.</li><li>Verify that <code>$:/config/SaveWikiButton/Template</code> still contains <code>$:/core/save/offline-external-js</code>. Modify if necessary.</li><li>Save your wiki again. Your wiki is now converted to using the external core.</li></ol></div>

</div></p>
</section>
</body>
</html>

