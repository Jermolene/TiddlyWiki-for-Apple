<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="generator" content="TiddlyWiki" />
<meta name="tiddlywiki-version" content="5.3.2-prerelease" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="format-detection" content="telephone=no">
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="static.css">
<title>ActionWidgets: TiddlyWiki — un carnet de notes web personnel et non linéaire
</title>
</head>
<body class="tc-body">
<p><div class="tc-static-alert"><div class="tc-static-alert-inner">This page is part of a static HTML representation of the TiddlyWiki at <a class="tc-tiddlylink-external" href="https://tiddlywiki.com/" rel="noopener noreferrer" target="_blank">https://tiddlywiki.com/</a></div></div>
</p>
<section class="tc-story-river tc-static-story-river">
<p><div class="tc-tiddler-frame tc-tiddler-view-frame tc-tiddler-exists  tc-tagged-Widgets" data-tags="Widgets" data-tiddler-title="ActionWidgets" role="article"><div class="tc-tiddler-title"><div class="tc-titlebar"><span class="tc-tiddler-controls"><button aria-expanded="false" aria-label="plus" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fmore-tiddler-actions" title="Actions supplémentaires"></button><div class=" tc-reveal" hidden="true"></div><button aria-label="éditer" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fedit" title="Édite ce tiddler"></button><button aria-label="fermer" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fclose" title="Ferme ce tiddler"></button></span><span><h2 class="tc-title">ActionWidgets</h2></span></div><div class="tc-tiddler-info tc-popup-handle tc-reveal" hidden="true"></div></div><div class="tc-reveal"></div><div class=" tc-reveal"><div class="tc-subtitle"><a class="tc-tiddlylink tc-tiddlylink-missing" href=".html"></a> 31 octobre 2021 à 17h29</div></div><div class=" tc-reveal"><div class="tc-tags-wrapper"><span class="tc-tag-list-item" data-tag-title="Widgets"><span aria-expanded="false" class="tc-tag-label tc-btn-invisible" draggable="true" style="background-color:;
fill:#333333;
color:#333333;">Widgets</span><span class="tc-drop-down tc-reveal" hidden="true"></span></span></div></div>






<div class="tc-tiddler-body tc-reveal"><p>Action widgets are a special type of widget that have no visual appearance but perform an action when triggered (such as sending a message, navigating to a tiddler, or changing the value of a tiddler). Action widgets are used in association with other widgets that <a class="tc-tiddlylink tc-tiddlylink-resolves" href="TriggeringWidgets.html">trigger those actions</a> (for example, the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="ButtonWidget.html">ButtonWidget</a>).</p><p>The following action widgets are provided:</p><p><ul class="">

<li>
<a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionConfirmWidget.html">
action-confirm
</a>
</li>

<li>
<a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionCreateTiddlerWidget.html">
action-createtiddler
</a>
</li>

<li>
<a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionDeleteFieldWidget.html">
action-deletefield
</a>
</li>

<li>
<a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionDeleteTiddlerWidget.html">
action-deletetiddler
</a>
</li>

<li>
<a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionListopsWidget.html">
action-listops
</a>
</li>

<li>
<a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionLogWidget.html">
action-log
</a>
</li>

<li>
<a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionNavigateWidget.html">
action-navigate
</a>
</li>

<li>
<a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionPopupWidget.html">
action-popup
</a>
</li>

<li>
<a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionSendMessageWidget.html">
action-sendmessage
</a>
</li>

<li>
<a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionSetFieldWidget.html">
action-setfield
</a>
</li>

<li>
<a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionSetMultipleFieldsWidget.html">
action-setmultiplefields
</a>
</li>

</ul></p><p>There are two ways to use action widgets:</p><ul><li>Placing them within an action string attribute (typically called <code>actions</code>) on the triggering widget (this is the preferred way)</li><li>Embedding the actions within the triggering widget (an older technique that is now deprecated)</li></ul><h2 class="">Using action string attributes</h2><p>The action widgets are passed as a string to the <code>actions</code> attribute of the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="TriggeringWidgets.html">triggering widget</a>. Usually, it is more convenient to use a macro to assign the action widgets to a variable. For example, here is a button that triggers two actions of sending different messages:</p><pre><code>\define my-actions()
&lt;$action-sendmessage $message="tm-home"/&gt;
&lt;$action-sendmessage $message="tm-full-screen"/&gt;
\end

&lt;$button actions=&lt;&lt;my-actions&gt;&gt;&gt;
Click me!
&lt;/$button&gt;</code></pre><h2 class="">Directly embedding action widgets</h2><p>The action widgets need not be immediate children of their <a class="tc-tiddlylink tc-tiddlylink-resolves" href="TriggeringWidgets.html">triggering widget</a>, but they must be descendents of it. The actions are performed in sequence. Here is the above example rewritten to use embedding:</p><pre><code>&lt;$button&gt;
&lt;$action-sendmessage $message="tm-home"/&gt;
&lt;$action-sendmessage $message="tm-full-screen"/&gt;
Click me!
&lt;/$button&gt;</code></pre><h1 class="">Action Execution Modes</h1><p><span class="doc-from-version"><svg class="tc-image-warning tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><path d="M57.072 11c3.079-5.333 10.777-5.333 13.856 0l55.426 96c3.079 5.333-.77 12-6.928 12H8.574c-6.158 0-10.007-6.667-6.928-12l55.426-96zM64 37c-4.418 0-8 3.582-8 7.994v28.012C56 77.421 59.59 81 64 81c4.418 0 8-3.582 8-7.994V44.994C72 40.579 68.41 37 64 37zm0 67a8 8 0 100-16 8 8 0 000 16z" fill-rule="evenodd"></path></svg> Depuis : 5.2.0</span> The default behaviour of action widgets has some peculiarities that often cause confusion. There is now an improved mode that simplifies how things work, but due to <a class="tc-tiddlylink tc-tiddlylink-missing" href="BackwardsCompatibility.html">BackwardsCompatibility</a> constraints, it must be explicitly engaged in order to take advantage of it.</p><p>The peculiarities relate to the way that the results of previous action widgets are available to subsequent action widgets. By default, action widgets are refreshed before each execution which ensure that they reflect the results of previous actions. However, ordinary widgets are not updated in the same way.</p><p>In the following contrived example, a button triggers a series of actions that should result in the string <code>foo</code> being assigned to the <strong>text</strong> field of the tiddler <a class="tc-tiddlylink tc-tiddlylink-missing" href="ActionTestTiddler.html">ActionTestTiddler</a>. However, it fails to produce the expected result because the <code>&lt;$set&gt;</code> widget is not refreshed with the new value of <a class="tc-tiddlylink tc-tiddlylink-missing" href="ActionTestTiddler.html">ActionTestTiddler</a> after the execution of the first <code>&lt;$action-setfield&gt;</code> widget.</p><div class="doc-example"><p><div style="position: relative;"><div style="position: absolute; bottom: 0; right: 0;"><button class="tc-btn-invisible" title="Copie ce texte dans le presse-papier"><svg class="tc-image-copy-clipboard tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><g fill-rule="evenodd"><rect height="8" rx="4" width="33" x="40" y="40"></rect><rect height="8" rx="4" width="17" x="40" y="82"></rect><rect height="8" rx="4" width="17" x="40" y="54"></rect><rect height="8" rx="4" width="33" x="40" y="96"></rect><rect height="8" rx="4" width="12" x="40" y="68"></rect><path d="M40 16H24c-4.419 0-8 3.59-8 8a8.031 8.031 0 000 .01v95.98a8.03 8.03 0 000 .01c0 4.41 3.581 8 8 8h80a7.975 7.975 0 005.652-2.34 7.958 7.958 0 002.348-5.652v-16.016c0-4.414-3.582-7.992-8-7.992-4.41 0-8 3.578-8 7.992V112H32V32h64v8.008C96 44.422 99.582 48 104 48c4.41 0 8-3.578 8-7.992V23.992a7.963 7.963 0 00-2.343-5.651A7.995 7.995 0 00104.001 16H88c0-4.41-3.585-8-8.007-8H48.007C43.588 8 40 11.582 40 16zm4-1.004A4.001 4.001 0 0148 11h32c2.21 0 4 1.797 4 3.996v4.008A4.001 4.001 0 0180 23H48c-2.21 0-4-1.797-4-3.996v-4.008z"></path><rect height="16" rx="8" width="66" x="62" y="64"></rect><path d="M84.657 82.343l-16-16v11.314l16-16a8 8 0 10-11.314-11.314l-16 16a8 8 0 000 11.314l16 16a8 8 0 1011.314-11.314z"></path></g></svg> copier dans le presse-papier</button></div></div></p><pre><code>\define actions()
&lt;$action-setfield $tiddler="ActionTestTiddler" $field="text" $value="FOO"/&gt;
&lt;$set name="newvalue" value={{{ [{ActionTestTiddler}lowercase[]] }}}&gt;
&lt;$action-setfield $tiddler="ActionTestTiddler" $field="text" $value=&lt;&lt;newvalue&gt;&gt;/&gt;
&lt;/$set&gt;
\end

Current value of ActionTestTiddler: {{ActionTestTiddler}}

&lt;$button actions=&lt;&lt;actions&gt;&gt;&gt;
Click me
&lt;/$button&gt;</code></pre><p>Affichera ceci :</p><p>Current value of <a class="tc-tiddlylink tc-tiddlylink-missing" href="ActionTestTiddler.html">ActionTestTiddler</a>: </p><p><button class="">
Click me
</button></p></div><p>The new behaviour avoids these problems by refreshing all widgets before execution, not just action widgets. It is engaged by running the actions in a scope that includes the variable <code>tv-action-refresh-policy</code> set to the value <code>always</code>.  (The default value for <code>tv-action-refresh-policy</code> is <code>once</code>).</p><p>The assignment can be done within an action string, or via a local variable declaration containing the widget triggering the action.</p><p><div class="doc-icon-block"><div class="doc-block-icon"><svg class="tc-image-warning tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><path d="M57.072 11c3.079-5.333 10.777-5.333 13.856 0l55.426 96c3.079 5.333-.77 12-6.928 12H8.574c-6.158 0-10.007-6.667-6.928-12l55.426-96zM64 37c-4.418 0-8 3.582-8 7.994v28.012C56 77.421 59.59 81 64 81c4.418 0 8-3.582 8-7.994V44.994C72 40.579 68.41 37 64 37zm0 67a8 8 0 100-16 8 8 0 000 16z" fill-rule="evenodd"></path></svg></div> Do not attempt to set <code>tv-action-refresh-policy</code> globally; the core will only work correctly with the default setting</div></p><p>The example above works as expected with the addition of <code>tv-action-refresh-policy</code>:</p><div class="doc-example"><p><div style="position: relative;"><div style="position: absolute; bottom: 0; right: 0;"><button class="tc-btn-invisible" title="Copie ce texte dans le presse-papier"><svg class="tc-image-copy-clipboard tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><g fill-rule="evenodd"><rect height="8" rx="4" width="33" x="40" y="40"></rect><rect height="8" rx="4" width="17" x="40" y="82"></rect><rect height="8" rx="4" width="17" x="40" y="54"></rect><rect height="8" rx="4" width="33" x="40" y="96"></rect><rect height="8" rx="4" width="12" x="40" y="68"></rect><path d="M40 16H24c-4.419 0-8 3.59-8 8a8.031 8.031 0 000 .01v95.98a8.03 8.03 0 000 .01c0 4.41 3.581 8 8 8h80a7.975 7.975 0 005.652-2.34 7.958 7.958 0 002.348-5.652v-16.016c0-4.414-3.582-7.992-8-7.992-4.41 0-8 3.578-8 7.992V112H32V32h64v8.008C96 44.422 99.582 48 104 48c4.41 0 8-3.578 8-7.992V23.992a7.963 7.963 0 00-2.343-5.651A7.995 7.995 0 00104.001 16H88c0-4.41-3.585-8-8.007-8H48.007C43.588 8 40 11.582 40 16zm4-1.004A4.001 4.001 0 0148 11h32c2.21 0 4 1.797 4 3.996v4.008A4.001 4.001 0 0180 23H48c-2.21 0-4-1.797-4-3.996v-4.008z"></path><rect height="16" rx="8" width="66" x="62" y="64"></rect><path d="M84.657 82.343l-16-16v11.314l16-16a8 8 0 10-11.314-11.314l-16 16a8 8 0 000 11.314l16 16a8 8 0 1011.314-11.314z"></path></g></svg> copier dans le presse-papier</button></div></div></p><pre><code>\define tv-action-refresh-policy() always

\define actions()
&lt;$action-setfield $tiddler="ActionTestTiddler" $field="text" $value="FOO"/&gt;
&lt;$set name="newvalue" value={{{ [{ActionTestTiddler}lowercase[]] }}}&gt;
&lt;$action-setfield $tiddler="ActionTestTiddler" $field="text" $value=&lt;&lt;newvalue&gt;&gt;/&gt;
&lt;/$set&gt;
\end

Current value of ActionTestTiddler: {{ActionTestTiddler}}

&lt;$button actions=&lt;&lt;actions&gt;&gt;&gt;
Click me
&lt;/$button&gt;</code></pre><p>Affichera ceci :</p><p>Current value of <a class="tc-tiddlylink tc-tiddlylink-missing" href="ActionTestTiddler.html">ActionTestTiddler</a>: </p><p><button class="">
Click me
</button></p></div></div>

</div></p>
</section>
</body>
</html>

