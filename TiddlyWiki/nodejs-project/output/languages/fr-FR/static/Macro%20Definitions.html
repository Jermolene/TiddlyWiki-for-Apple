<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="generator" content="TiddlyWiki" />
<meta name="tiddlywiki-version" content="5.3.2-prerelease" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="format-detection" content="telephone=no">
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="static.css">
<title>Macro Definitions: TiddlyWiki — un carnet de notes web personnel et non linéaire
</title>
</head>
<body class="tc-body">
<p><div class="tc-static-alert"><div class="tc-static-alert-inner">This page is part of a static HTML representation of the TiddlyWiki at <a class="tc-tiddlylink-external" href="https://tiddlywiki.com/" rel="noopener noreferrer" target="_blank">https://tiddlywiki.com/</a></div></div>
</p>
<section class="tc-story-river tc-static-story-river">
<p><div class="tc-tiddler-frame tc-tiddler-view-frame tc-tiddler-exists  tc-tagged-WikiText tc-tagged-Macros" data-tags="WikiText Macros" data-tiddler-title="Macro Definitions" role="article"><div class="tc-tiddler-title"><div class="tc-titlebar"><span class="tc-tiddler-controls"><button aria-expanded="false" aria-label="plus" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fmore-tiddler-actions" title="Actions supplémentaires"></button><div class=" tc-reveal" hidden="true"></div><button aria-label="éditer" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fedit" title="Édite ce tiddler"></button><button aria-label="fermer" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fclose" title="Ferme ce tiddler"></button></span><span><h2 class="tc-title">Macro Definitions</h2></span></div><div class="tc-tiddler-info tc-popup-handle tc-reveal" hidden="true"></div></div><div class="tc-reveal"></div><div class=" tc-reveal"><div class="tc-subtitle"><a class="tc-tiddlylink tc-tiddlylink-missing" href=".html"></a> 19 avril 2023 à 11h31</div></div><div class=" tc-reveal"><div class="tc-tags-wrapper"><span class="tc-tag-list-item" data-tag-title="Macros"><span aria-expanded="false" class="tc-tag-label tc-btn-invisible" draggable="true" style="background-color:;
fill:#333333;
color:#333333;">Macros</span><span class="tc-drop-down tc-reveal" hidden="true"></span></span><span class="tc-tag-list-item" data-tag-title="WikiText"><span aria-expanded="false" class="tc-tag-label tc-btn-invisible" draggable="true" style="background-color:;
fill:#333333;
color:#333333;">WikiTexte</span><span class="tc-drop-down tc-reveal" hidden="true"></span></span></div></div>






<div class="tc-tiddler-body tc-reveal"><h2 class="">Introduction</h2><p>This tiddler describes the different ways in which <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Macros.html">macros</a> can be defined.</p><h2 class="">Macro Definition Pragma</h2><p>Macros are created using the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Pragma%253A%2520%255Cdefine.html">Pragma: \define</a> at the start of a tiddler. The definitions are available in the rest of the tiddler that defines them, plus any tiddlers that it transcludes.</p><pre><code>\define mymacro(param)
This is the macro text (param=$param$)
\end</code></pre><h2 class="">Nested Macro Definitions</h2><p>Macro definitions can be nested to any number of required levels by specifying the name of the macro in the <code>\end</code> marker. Nested macro definitions must appear at the start of the definition that contains them. For example:</p><div class="doc-example"><p><div style="position: relative;"><div style="position: absolute; bottom: 0; right: 0;"><button class="tc-btn-invisible" title="Copie ce texte dans le presse-papier"><svg class="tc-image-copy-clipboard tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><g fill-rule="evenodd"><rect height="8" rx="4" width="33" x="40" y="40"></rect><rect height="8" rx="4" width="17" x="40" y="82"></rect><rect height="8" rx="4" width="17" x="40" y="54"></rect><rect height="8" rx="4" width="33" x="40" y="96"></rect><rect height="8" rx="4" width="12" x="40" y="68"></rect><path d="M40 16H24c-4.419 0-8 3.59-8 8a8.031 8.031 0 000 .01v95.98a8.03 8.03 0 000 .01c0 4.41 3.581 8 8 8h80a7.975 7.975 0 005.652-2.34 7.958 7.958 0 002.348-5.652v-16.016c0-4.414-3.582-7.992-8-7.992-4.41 0-8 3.578-8 7.992V112H32V32h64v8.008C96 44.422 99.582 48 104 48c4.41 0 8-3.578 8-7.992V23.992a7.963 7.963 0 00-2.343-5.651A7.995 7.995 0 00104.001 16H88c0-4.41-3.585-8-8.007-8H48.007C43.588 8 40 11.582 40 16zm4-1.004A4.001 4.001 0 0148 11h32c2.21 0 4 1.797 4 3.996v4.008A4.001 4.001 0 0180 23H48c-2.21 0-4-1.797-4-3.996v-4.008z"></path><rect height="16" rx="8" width="66" x="62" y="64"></rect><path d="M84.657 82.343l-16-16v11.314l16-16a8 8 0 10-11.314-11.314l-16 16a8 8 0 000 11.314l16 16a8 8 0 1011.314-11.314z"></path></g></svg> copier dans le presse-papier</button></div></div></p><pre><code>\define special-button(caption:"Click me")
\define actions()
&lt;$action-sendmessage $message="tm-notify" $param="HelloThere"/&gt;
\end actions
&lt;$button actions=&lt;&lt;actions&gt;&gt;&gt;
$caption$
&lt;/$button&gt;
\end special-button

&lt;&lt;special-button&gt;&gt;
</code></pre><p>Affichera ceci :</p><p><button class="">
Click me
</button></p></div><p>Note that the textual substitution of macro parameters that occurs when the outer macro is rendered will apply to the nested definitions as well. That generally means that textual substitution of macro parameters should not be used within nested macros.</p><p>Parameters of nested macros can also be accessed via the <code>&lt;&lt;__variablename__&gt;&gt;</code> syntax. As ordinary variables, these parameters are available within nested child macros (and grandchildren etc).</p><h2 class="">Macro Definition with Set Widget</h2><p>Macros are implemented as a special type of <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Variables.html">variable</a> and so internally are actually defined with a <a class="tc-tiddlylink tc-tiddlylink-resolves" href="SetWidget.html"><code class="doc-widget">$set</code></a> widget.</p><pre><code>&lt;$set name="mymacro" value="This is the macro text"&gt;
...
&lt;/$set&gt;</code></pre><dl class="doc-note"><dt>Note</dt><dd>that it is not currently possible to specify parameters when defining a macro with the  <a class="tc-tiddlylink tc-tiddlylink-resolves" href="SetWidget.html"><code class="doc-widget">$set</code></a> widget.</dd></dl><h2 class="">Importing Macro Definitions</h2><p>The <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Pragma%253A%2520%255Cimport.html">Pragma: \import</a> or <a class="tc-tiddlylink tc-tiddlylink-resolves" href="ImportVariablesWidget.html"><code class="doc-widget">$importvariables</code></a> widget can be used to copy macro definitions from another tiddler.</p><h2 class=""><code>$:/tags/Macro</code> Tag</h2><p>Global macros can be defined using the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="SystemTag%253A%2520%2524%253A%252Ftags%252FMacro.html">SystemTag: $:/tags/Macro</a>.</p><p>The tag <a class="tc-tiddlylink tc-tiddlylink-resolves" href="SystemTag%253A%2520%2524%253A%252Ftags%252FMacro%252FView.html">SystemTag: $:/tags/Macro/View</a> is used to define macros that should only be available within the main view template and the preview panel.</p><p>The tag <a class="tc-tiddlylink tc-tiddlylink-resolves" href="SystemTag%253A%2520%2524%253A%252Ftags%252FMacro%252FView%252FBody.html">SystemTag: $:/tags/Macro/View/Body</a> is used to define macros that should only be available within the main view template body and the preview panel.</p><h2 class=""><a class="tc-tiddlylink tc-tiddlylink-resolves" href="JavaScript.html">JavaScript</a> Macros</h2><p>Macros can also be <a class="tc-tiddlylink-external" href="https://tiddlywiki.com/dev/index.html#JavaScript%20Macros" rel="noopener noreferrer" target="_blank">written as JavaScript modules</a>.
</p></div>

</div></p>
</section>
</body>
</html>

