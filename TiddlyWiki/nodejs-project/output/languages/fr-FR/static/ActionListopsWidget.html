<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="generator" content="TiddlyWiki" />
<meta name="tiddlywiki-version" content="5.3.2-prerelease" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="format-detection" content="telephone=no">
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="static.css">
<title>action-listops: TiddlyWiki — un carnet de notes web personnel et non linéaire
</title>
</head>
<body class="tc-body">
<p><div class="tc-static-alert"><div class="tc-static-alert-inner">This page is part of a static HTML representation of the TiddlyWiki at <a class="tc-tiddlylink-external" href="https://tiddlywiki.com/" rel="noopener noreferrer" target="_blank">https://tiddlywiki.com/</a></div></div>
</p>
<section class="tc-story-river tc-static-story-river">
<p><div class="tc-tiddler-frame tc-tiddler-view-frame tc-tiddler-exists  tc-tagged-ActionWidgets tc-tagged-Widgets" data-tags="ActionWidgets Widgets" data-tiddler-title="ActionListopsWidget" role="article"><div class="tc-tiddler-title"><div class="tc-titlebar"><span class="tc-tiddler-controls"><button aria-expanded="false" aria-label="plus" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fmore-tiddler-actions" title="Actions supplémentaires"></button><div class=" tc-reveal" hidden="true"></div><button aria-label="éditer" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fedit" title="Édite ce tiddler"></button><button aria-label="fermer" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fclose" title="Ferme ce tiddler"></button></span><span><h2 class="tc-title">ActionListopsWidget</h2></span></div><div class="tc-tiddler-info tc-popup-handle tc-reveal" hidden="true"></div></div><div class="tc-reveal"></div><div class=" tc-reveal"><div class="tc-subtitle"><a class="tc-tiddlylink tc-tiddlylink-missing" href=".html"></a> 5 août 2023 à 11h35</div></div><div class=" tc-reveal"><div class="tc-tags-wrapper"><span class="tc-tag-list-item" data-tag-title="ActionWidgets"><span aria-expanded="false" class="tc-tag-label tc-btn-invisible" draggable="true" style="background-color:;
fill:#333333;
color:#333333;">ActionWidgets</span><span class="tc-drop-down tc-reveal" hidden="true"></span></span><span class="tc-tag-list-item" data-tag-title="Widgets"><span aria-expanded="false" class="tc-tag-label tc-btn-invisible" draggable="true" style="background-color:;
fill:#333333;
color:#333333;">Widgets</span><span class="tc-drop-down tc-reveal" hidden="true"></span></span></div></div>






<div class="tc-tiddler-body tc-reveal"><h1 class="">Introduction</h1><p>The <strong>action-listops</strong> widget is an <a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionWidgets.html">action widget</a> that manipulates user lists in any field or data index. <a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionWidgets.html">ActionWidgets</a> are used within triggering widgets such as the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="ButtonWidget.html">ButtonWidget</a>.</p><h1 class="">Content and Attributes</h1><p>The <strong>action-listops</strong> widget is invisible. Any content within it is ignored.</p><table><tbody><tr class="evenRow"><th align="left">Attribute</th><th align="left">Description</th></tr><tr class="oddRow"><td align="left">$tiddler</td><td align="left">The title of the tiddler whose lists are to be modified (if not provided defaults to the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Current%2520Tiddler.html">current tiddler</a>)</td></tr><tr class="evenRow"><td align="left">$field</td><td align="left">The name of a field to be manipulated as a list (defaults to 'list')</td></tr><tr class="oddRow"><td align="left">$index</td><td align="left">Optional index of a property in a <a class="tc-tiddlylink tc-tiddlylink-resolves" href="DataTiddlers.html">data tiddler</a> index to be manipulated as a list</td></tr><tr class="evenRow"><td align="left">$filter</td><td align="left">An optional filter expression, the output of which will be saved to the field/index being manipulated</td></tr><tr class="oddRow"><td align="left">$subfilter</td><td align="left">An optional subfilter expression, which takes the list being manipulated as input, and saves the modified list back to the field/index being manipulated</td></tr><tr class="evenRow"><td align="left">$tags</td><td align="left">An optional subfilter expression, which takes the <code class="doc-field">tags</code> field of the target tiddler as input, and saves the modified list of tags back to the <code class="doc-field">tags</code> field</td></tr></tbody></table><h2 class="">Note on subfilter expressions</h2><p>If the manipulation depends on the current contents of the list, e.g. when using the <a class="tc-tiddlylink tc-tiddlylink-missing" href="Op%25C3%25A9rateur%2520toggle.html"><code class="doc-operator">toggle</code></a> operator to toggle the presence of an element, the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Filter%2520Run.html">Filter Run</a> would be prefixed with the <code>+</code> / <code>:and</code> <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Filter%2520Expression.html">filter run prefix</a> so that it properly receives the list as input. </p><pre><code>&lt;$action-listops $subfilter="+[toggle[List Item]]"/&gt;</code></pre><p>The above widget will toggle the presence of the element <code class="doc-value">List Item</code> in the field <code class="doc-field">list</code> of the current tiddler, removing or adding the element as necessary.</p><p>Similarly, if an element is to always be removed when it is present, the <code>-</code> / <code>:except</code> <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Filter%2520Expression.html">filter run prefix</a> can be used. Both of the following yield the same result:</p><pre><code>&lt;$action-listops $subfilter="-[[List Item]]"/&gt;
&lt;$action-listops $subfilter="+[remove[List Item]]"/&gt;</code></pre><p>Without any prefixes, the filter run output is simply <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Dominant%2520Append.html">dominantly appended</a> to the list.</p><p>See also the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionListopsWidget%2520%2528Examples%2529.html">Examples</a>.</p><h2 class="">Using $filter or $subfilter</h2><p>Standalone use of the <code>$subfilter</code> attribute can be replaced by using a (more complicated) <code>$filter</code> attribute value.</p><p>For example, the items "abc" and "123" can be appended to the field <code>myfield</code> using the <code>$subfilter</code> attribute:</p><pre><code>&lt;$action-listops $field="myfield" $subfilter="abc 123"/&gt;</code></pre><p>The same can be achieved using the <code>$filter</code> attribute and prepending the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Filter%2520Run.html">Filter Run</a> <code>[enlist{!!myfield}]</code> to the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Filter%2520Expression.html">Filter Expression</a>:</p><pre><code>&lt;$action-listops $field="myfield" $filter="[enlist{!!myfield}] abc 123"/&gt;</code></pre><p>The short form is more convenient, but the long form is useful for live-debugging complicated <code>$subfilter</code> values using the filter tab of <a class="tc-tiddlylink tc-tiddlylink-shadow" href="%2524%253A%252FAdvancedSearch.html">$:/AdvancedSearch</a>. By using <a class="tc-tiddlylink tc-tiddlylink-shadow" href="%2524%253A%252FAdvancedSearch.html">$:/AdvancedSearch</a>, the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Filter%2520Expression.html">Filter Expression</a> can be tested before using <strong>action-listops</strong> to modify actual tiddler fields. For this use case, the <code>all[current]</code> portion of the expression needs to be changed to select the proper test tiddler.</p><h2 class="">Using $tags or $subfilter</h2><p><a class="tc-tiddlylink tc-tiddlylink-resolves" href="Tagging.html">Tagging</a> is implemented using a tiddler's 'tags' field, so appending the tags "abc" and "123" using the <code>$tags</code> attribute like this:</p><pre><code>&lt;$action-listops $tags="abc 123"/&gt;</code></pre><p>is mostly equivalent to using <code>$subfilter</code> along with "tags" for the value of <code>$field</code>:</p><pre><code>&lt;$action-listops $field="tags" $subfilter="abc 123"/&gt;</code></pre><h2 class="">Comparison to <a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionSetFieldWidget.html">ActionSetFieldWidget</a></h2><p>In general, <a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionSetFieldWidget.html">ActionSetFieldWidget</a> is better for setting multiple fields at once and for replacing the value of a field, which can also be a list. The <a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionListopsWidget.html">ActionListopsWidget</a> is better for modifying a list field based on the existing list and for using a <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Filter%2520Expression.html">Filter Expression</a> to derive the value of the field.</p><p>The ActionSetFieldWidget sets the value of a field using <code>$field</code> and <code>$value</code> attribute pairs or attributes that do not start with a <code>$</code>. A single ActionSetFieldWidget can be used to set any number of fields of a single tiddler.</p><p>The ActionListopsWidget replaces or modifies a single field's value using filter expressions.</p><p>The following widgets are functionally equivalent:</p><pre><code>&lt;$action-setfield $field="myfield" $value="abc 123"/&gt;
&lt;$action-setfield myfield="abc 123"/&gt;
&lt;$action-listops $field="myfield" $filter="abc 123"/&gt;</code></pre><p>Note that <code class="doc-value">abc 123</code> in the first two cases is a literal string that is assigned to the field <code class="doc-field">myfield</code>, but in the third case a filter expression which evaluates to the same string.</p><h2 class="">Extended Filter Operators</h2><p>A number of <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Extended%2520Listops%2520Filters.html">Extended Listops Filters</a> are necessary for the manipulation of lists. These operators have been designed primarily for use in subfilter expressions whereby the modified current list is returned in place of the current list.</p><h2 class="">Notes on de-duplication</h2><p>In some cases, there may occur unexpected de-duplication of lists.</p><h3 class="">Assignments to the <code class="doc-field">list</code> field</h3><p>When assigning filter results to the <code class="doc-field">list</code> field (default), the generated list is automatically de-duplicated, so</p><pre><code>&lt;$action-listops $filter="[[1]] :and[[1]]"/&gt;</code></pre><p>will result in the <code class="doc-field">list</code> field of the current tiddler containing the string <code class="doc-value">1</code>, but not <code class="doc-value">1 1</code>.</p><h3 class="">Input to the subfilter expression</h3><p>The input to the subfilter expression in the <code>$subfilter</code> attribute is also de-duplicated. If you rely on lists containing duplicates, consider using this alternative using the <code>$filter</code> attribute:</p><p><div class="doc-example"><p><div style="position: relative;"><div style="position: absolute; bottom: 0; right: 0;"><button class="tc-btn-invisible" title="Copie ce texte dans le presse-papier"><svg class="tc-image-copy-clipboard tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><g fill-rule="evenodd"><rect height="8" rx="4" width="33" x="40" y="40"></rect><rect height="8" rx="4" width="17" x="40" y="82"></rect><rect height="8" rx="4" width="17" x="40" y="54"></rect><rect height="8" rx="4" width="33" x="40" y="96"></rect><rect height="8" rx="4" width="12" x="40" y="68"></rect><path d="M40 16H24c-4.419 0-8 3.59-8 8a8.031 8.031 0 000 .01v95.98a8.03 8.03 0 000 .01c0 4.41 3.581 8 8 8h80a7.975 7.975 0 005.652-2.34 7.958 7.958 0 002.348-5.652v-16.016c0-4.414-3.582-7.992-8-7.992-4.41 0-8 3.578-8 7.992V112H32V32h64v8.008C96 44.422 99.582 48 104 48c4.41 0 8-3.578 8-7.992V23.992a7.963 7.963 0 00-2.343-5.651A7.995 7.995 0 00104.001 16H88c0-4.41-3.585-8-8.007-8H48.007C43.588 8 40 11.582 40 16zm4-1.004A4.001 4.001 0 0148 11h32c2.21 0 4 1.797 4 3.996v4.008A4.001 4.001 0 0180 23H48c-2.21 0-4-1.797-4-3.996v-4.008z"></path><rect height="16" rx="8" width="66" x="62" y="64"></rect><path d="M84.657 82.343l-16-16v11.314l16-16a8 8 0 10-11.314-11.314l-16 16a8 8 0 000 11.314l16 16a8 8 0 1011.314-11.314z"></path></g></svg> copier dans le presse-papier</button></div></div></p><pre><code>&lt;$button&gt;
&lt;$action-listops $field="myfield" $filter="[enlist:raw{!!myfield}] :all[[abc]]" /&gt;
Add 'abc' to 'myfield'
&lt;/$button&gt;

&lt;$list filter="[enlist:raw{!!myfield}]" template="$:/core/ui/ListItemTemplate" /&gt;
</code></pre><p>Affichera ceci :</p><p><button class="">

Add 'abc' to 'myfield'
</button></p></div>
The <a class="tc-tiddlylink tc-tiddlylink-resolves" href="enlist%2520Operator.html">enlist Operator</a> with <code>raw</code> suffix will enlist the list saved in <code class="doc-field">myfield</code> of the current tiddler without de-duplication, while e.g. the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="list%2520Operator.html">list Operator</a> will always de-duplicate. The widget then adds the item <code class="doc-value">abc</code> – whether or not it is already included in the list – and replaces the original list in <code class="doc-field">myfield</code>.</p><h1 class=""><a class="tc-tiddlylink tc-tiddlylink-resolves" href="ActionListopsWidget%2520%2528Examples%2529.html">Examples</a></h1></div>

</div></p>
</section>
</body>
</html>

