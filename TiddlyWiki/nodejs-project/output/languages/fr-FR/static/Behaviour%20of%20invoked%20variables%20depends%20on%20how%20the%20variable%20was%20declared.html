<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="generator" content="TiddlyWiki" />
<meta name="tiddlywiki-version" content="5.3.2-prerelease" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="format-detection" content="telephone=no">
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="static.css">
<title>Behaviour of invoked variables depends on how the variable was declared: TiddlyWiki — un carnet de notes web personnel et non linéaire
</title>
</head>
<body class="tc-body">
<p><div class="tc-static-alert"><div class="tc-static-alert-inner">This page is part of a static HTML representation of the TiddlyWiki at <a class="tc-tiddlylink-external" href="https://tiddlywiki.com/" rel="noopener noreferrer" target="_blank">https://tiddlywiki.com/</a></div></div>
</p>
<section class="tc-story-river tc-static-story-river">
<p><div class="tc-tiddler-frame tc-tiddler-view-frame tc-tiddler-exists  tc-tagged-Variable%20Usage" data-tags="[[Variable Usage]]" data-tiddler-title="Behaviour of invoked variables depends on how the variable was declared" role="article"><div class="tc-tiddler-title"><div class="tc-titlebar"><span class="tc-tiddler-controls"><button aria-expanded="false" aria-label="plus" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fmore-tiddler-actions" title="Actions supplémentaires"></button><div class=" tc-reveal" hidden="true"></div><button aria-label="éditer" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fedit" title="Édite ce tiddler"></button><button aria-label="fermer" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fclose" title="Ferme ce tiddler"></button></span><span><h2 class="tc-title">Behaviour of invoked variables depends on how the variable was declared</h2></span></div><div class="tc-tiddler-info tc-popup-handle tc-reveal" hidden="true"></div></div><div class="tc-reveal"></div><div class=" tc-reveal"><div class="tc-subtitle"><a class="tc-tiddlylink tc-tiddlylink-missing" href=".html"></a> 26 juillet 2023 à 15h57</div></div><div class=" tc-reveal"><div class="tc-tags-wrapper"><span class="tc-tag-list-item" data-tag-title="Variable Usage"><span aria-expanded="false" class="tc-tag-label tc-btn-invisible" draggable="true" style="background-color:;
fill:#333333;
color:#333333;">Variable Usage</span><span class="tc-drop-down tc-reveal" hidden="true"></span></span></div></div>






<div class="tc-tiddler-body tc-reveal"><p>Invoked in normal wikitext context: <code>&lt;$transclude $variable=macro/&gt;</code> or <code>&lt;&lt;macro&gt;&gt;</code></p><table class="tc-first-col-min-width"><tbody><tr class="evenRow"><th>how declared</th><th>behaviour</th></tr><tr class="oddRow"><td>\define</td><td>All wikitext and variable substitution and textual substitution takes place</td></tr><tr class="evenRow"><td><a class="tc-tiddlylink tc-tiddlylink-resolves" href="SetWidget.html"><code class="doc-widget">$set</code></a>, <a class="tc-tiddlylink tc-tiddlylink-resolves" href="LetWidget.html"><code class="doc-widget">$let</code></a>, <a class="tc-tiddlylink tc-tiddlylink-resolves" href="VarsWidget.html"><code class="doc-widget">$vars</code></a>, \procedure, \widget</td><td>All wikitext and variable substitution takes place</td></tr><tr class="oddRow"><td>\function</td><td>Invoking a function in this way (<code>&lt;&lt;macro&gt;&gt;</code>) is a synonym for <code>&lt;$text text={{{[function[macro]]}}}/&gt;</code>. As with any filtered transclusion (i.e. triple curly braces), all results except the first are discarded</td></tr></tbody></table><p>Invoked via widget attribute: <code>&lt;div class=&lt;&lt;macro&gt;&gt;/&gt;</code></p><table class="tc-first-col-min-width"><tbody><tr class="evenRow"><th>how declared</th><th>behaviour</th></tr><tr class="oddRow"><td>\define</td><td>Textual substitution of parameters is performed on the body text. No further processing takes place. The result after textual substitution is used as the attribute's value</td></tr><tr class="evenRow"><td><a class="tc-tiddlylink tc-tiddlylink-resolves" href="SetWidget.html"><code class="doc-widget">$set</code></a>, <a class="tc-tiddlylink tc-tiddlylink-resolves" href="LetWidget.html"><code class="doc-widget">$let</code></a>, <a class="tc-tiddlylink tc-tiddlylink-resolves" href="VarsWidget.html"><code class="doc-widget">$vars</code></a>, \procedure, \widget</td><td>Body text is retrieved as-is and used as the attribute's value.</td></tr><tr class="oddRow"><td>\function</td><td>When a function is invoked as <code>&lt;div class=&lt;&lt;macro&gt;&gt;/&gt;</code>, it is a synonym for <code>&lt;div class={{{[function[macro]]}}}/&gt;</code>. As with any filtered transclusion (i.e. triple curly braces), all results except the first are discarded. That first result is used as the attribute's value. Note that functions are recursively processed even when invoked in this form. In other words a filter expression in a function can invoke another function and the processing will continue</td></tr></tbody></table><p>Invoked via filter operator parameter: <code>[&lt;macro&gt;]</code></p><table class="tc-first-col-min-width"><tbody><tr class="evenRow"><th>how declared</th><th>behaviour</th></tr><tr class="oddRow"><td>\define</td><td>Textual substitution of parameters is performed on the body text. No further processing takes place. The result after textual substitution is used as the filter operator's parameter.</td></tr><tr class="evenRow"><td><a class="tc-tiddlylink tc-tiddlylink-resolves" href="SetWidget.html"><code class="doc-widget">$set</code></a>, <a class="tc-tiddlylink tc-tiddlylink-resolves" href="LetWidget.html"><code class="doc-widget">$let</code></a>, <a class="tc-tiddlylink tc-tiddlylink-resolves" href="VarsWidget.html"><code class="doc-widget">$vars</code></a>, \procedure, \widget</td><td>Body text is retrieved as-is and used as the filter operator's parameter.</td></tr><tr class="oddRow"><td>\function</td><td>The body text of the function is treated as a filter expression and evaluated. The first result is passed to the operator as a parameter. The remaining results are discarded.</td></tr></tbody></table><p>Invoked via function call in a filter expression: <code>[function[macro]]</code></p><table class="tc-first-col-min-width"><tbody><tr class="evenRow"><th>how declared</th><th>behaviour</th></tr><tr class="oddRow"><td>\define, <a class="tc-tiddlylink tc-tiddlylink-resolves" href="SetWidget.html"><code class="doc-widget">$set</code></a>, <a class="tc-tiddlylink tc-tiddlylink-resolves" href="LetWidget.html"><code class="doc-widget">$let</code></a>, <a class="tc-tiddlylink tc-tiddlylink-resolves" href="VarsWidget.html"><code class="doc-widget">$vars</code></a>, \procedure, \widget</td><td>Every function is a variable, but only variables defined using \function are invokable using the <a class="tc-tiddlylink tc-tiddlylink-missing" href="Op%25C3%25A9rateur%2520function.html"><code class="doc-operator">function</code></a> filter operator. Attempts to use a non-function variable is the same as if the function doesn't exist. The behavior in this case is like the identity function. All filter input is passed unchanged to the output.</td></tr><tr class="evenRow"><td>\function</td><td>The body text of the function is treated as a filter expression and evaluated. This filter expression can itself contain a function call. Filter expressions can be factored out into functions arbitrarily deep.</td></tr></tbody></table><h2 class="">Examples</h2><p>Below is an example macro, procedure and function definition.  All three forms of parameter substitution <code>$a1$</code>, <code>&lt;&lt;__a1__&gt;&gt;</code>, and <code>&lt;&lt;a1&gt;&gt;</code> are included in each definition. The output helps illustrate when each form of substitution will or will not have affect.</p><pre><code>\define m1(a1) $a1$ - &lt;&lt;__a1__&gt;&gt; - &lt;&lt;a1&gt;&gt;
\procedure p1(a1) $a1$ - &lt;&lt;__a1__&gt;&gt; - &lt;&lt;a1&gt;&gt;
\function f1(a1) $a1$ "-" [&lt;__a1__&gt;] ="-" [&lt;a1&gt;] :and[join[ ]]</code></pre><table><tbody><tr class="evenRow"><th align="right">Variable transclusion</th><th align="left">output</th></tr><tr class="oddRow"><td align="right"><code>&lt;&lt;m1 foo&gt;&gt;</code></td><td>foo - foo - </td></tr><tr class="evenRow"><td align="right"><code>&lt;&lt;p1 foo&gt;&gt;</code></td><td>$a1$ -  - foo</td></tr><tr class="oddRow"><td align="right"><code>&lt;&lt;f1 foo&gt;&gt;</code></td><td>$a1$ -  - foo</td></tr><tr class="evenRow"><th align="right">Widget attribute</th><th align="left">output</th></tr><tr class="oddRow"><td align="right"><code>&lt;$text text=&lt;&lt;m1 foo&gt;&gt;/&gt;</code></td><td>foo - &lt;&lt;__a1__&gt;&gt; - &lt;&lt;a1&gt;&gt;</td></tr><tr class="evenRow"><td align="right"><code>&lt;$text text=&lt;&lt;p1 foo&gt;&gt;/&gt;</code></td><td>$a1$ - &lt;&lt;__a1__&gt;&gt; - &lt;&lt;a1&gt;&gt;</td></tr><tr class="oddRow"><td align="right"><code>&lt;$text text=&lt;&lt;f1 foo&gt;&gt;/&gt;</code></td><td>$a1$ -  - foo</td></tr><tr class="evenRow"><th align="right">Filter operator parameter</th><th align="left">output</th></tr><tr class="oddRow"><td align="right"><code>[&lt;m1 foo&gt;]</code></td><td>foo - &lt;&lt;__a1__&gt;&gt; - &lt;&lt;a1&gt;&gt;</td></tr><tr class="evenRow"><td align="right"><code>[&lt;p1 foo&gt;]</code></td><td>$a1$ - &lt;&lt;__a1__&gt;&gt; - &lt;&lt;a1&gt;&gt;</td></tr><tr class="oddRow"><td align="right"><code>[&lt;f1 foo&gt;]</code></td><td>$a1$ -  - foo</td></tr><tr class="evenRow"><th align="right">Function call in filter expression</th><th align="left">output</th></tr><tr class="oddRow"><td align="right"><code>[function[m1],[foo]]</code></td><td>"A free, open source wiki revisited" by Mark Gibbs, NetworkWorld</td></tr><tr class="evenRow"><td align="right"><code>[function[p1],[foo]]</code></td><td>"A free, open source wiki revisited" by Mark Gibbs, NetworkWorld</td></tr><tr class="oddRow"><td align="right"><code>[function[f1],[foo]]</code></td><td>$a1$ -  - foo</td></tr></tbody></table></div>

</div></p>
</section>
</body>
</html>

