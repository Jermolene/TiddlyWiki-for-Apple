<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="generator" content="TiddlyWiki" />
<meta name="tiddlywiki-version" content="5.3.2-prerelease" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="format-detection" content="telephone=no">
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="static.css">
<title>Map Filter Run Prefix (Examples): TiddlyWiki — un carnet de notes web personnel et non linéaire
</title>
</head>
<body class="tc-body">
<p><div class="tc-static-alert"><div class="tc-static-alert-inner">This page is part of a static HTML representation of the TiddlyWiki at <a class="tc-tiddlylink-external" href="https://tiddlywiki.com/" rel="noopener noreferrer" target="_blank">https://tiddlywiki.com/</a></div></div>
</p>
<section class="tc-story-river tc-static-story-river">
<p><div class="tc-tiddler-frame tc-tiddler-view-frame tc-tiddler-exists  tc-tagged-Filter%20Syntax tc-tagged-Filter%20Run%20Prefix%20Examples tc-tagged-Map%20Filter%20Run%20Prefix" data-tags="[[Filter Syntax]] [[Filter Run Prefix Examples]] [[Map Filter Run Prefix]]" data-tiddler-title="Map Filter Run Prefix (Examples)" role="article"><div class="tc-tiddler-title"><div class="tc-titlebar"><span class="tc-tiddler-controls"><button aria-expanded="false" aria-label="plus" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fmore-tiddler-actions" title="Actions supplémentaires"></button><div class=" tc-reveal" hidden="true"></div><button aria-label="éditer" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fedit" title="Édite ce tiddler"></button><button aria-label="fermer" class="tc-btn-invisible tc-btn-%24%3A%2Fcore%2Fui%2FButtons%2Fclose" title="Ferme ce tiddler"></button></span><span><h2 class="tc-title">Map Filter Run Prefix (Examples)</h2></span></div><div class="tc-tiddler-info tc-popup-handle tc-reveal" hidden="true"></div></div><div class="tc-reveal"></div><div class=" tc-reveal"><div class="tc-subtitle"><a class="tc-tiddlylink tc-tiddlylink-missing" href=".html"></a> 24 juillet 2022 à 17h23</div></div><div class=" tc-reveal"><div class="tc-tags-wrapper"><span class="tc-tag-list-item" data-tag-title="Filter Run Prefix Examples"><span aria-expanded="false" class="tc-tag-label tc-btn-invisible" draggable="true" style="background-color:;
fill:#333333;
color:#333333;">Filter Run Prefix Examples</span><span class="tc-drop-down tc-reveal" hidden="true"></span></span><span class="tc-tag-list-item" data-tag-title="Filter Syntax"><span aria-expanded="false" class="tc-tag-label tc-btn-invisible" draggable="true" style="background-color:;
fill:#333333;
color:#333333;">Syntaxe d'un filtre</span><span class="tc-drop-down tc-reveal" hidden="true"></span></span><span class="tc-tag-list-item" data-tag-title="Map Filter Run Prefix"><span aria-expanded="false" class="tc-tag-label tc-btn-invisible" draggable="true" style="background-color:;
fill:#333333;
color:#333333;">Map Filter Run Prefix</span><span class="tc-drop-down tc-reveal" hidden="true"></span></span></div></div>






<div class="tc-tiddler-body tc-reveal"><p>Replace the input titles with the caption field if it exists, otherwise preserve the input title:</p><p><div class="doc-example">
<code>[tag[Widgets]] :map[get[caption]else{!!title}]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></p><p><div class="doc-icon-block"><div class="doc-block-icon"><svg class="tc-image-tip tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><path d="M64 128.242c35.346 0 64-28.654 64-64 0-35.346-28.654-64-64-64-35.346 0-64 28.654-64 64 0 35.346 28.654 64 64 64zm11.936-36.789c-.624 4.129-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349C54.33 94.05 58.824 95.82 64 95.82c5.175 0 9.67-1.769 11.936-4.366zm0 4.492c-.624 4.13-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349 2.266 2.597 6.76 4.366 11.936 4.366 5.175 0 9.67-1.769 11.936-4.366zm0 4.456c-.624 4.129-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349 2.266 2.597 6.76 4.366 11.936 4.366 5.175 0 9.67-1.769 11.936-4.366zm0 4.492c-.624 4.13-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349 2.266 2.597 6.76 4.366 11.936 4.366 5.175 0 9.67-1.769 11.936-4.366zM64.3 24.242c11.618 0 23.699 7.82 23.699 24.2S75.92 71.754 75.92 83.576c0 5.873-5.868 9.26-11.92 9.26s-12.027-3.006-12.027-9.26C51.973 71.147 40 65.47 40 48.442s12.683-24.2 24.301-24.2z" fill-rule="evenodd"></path></svg></div> The above example is equivalent to <code>[tag[Widgets]] :map[{!!caption}!is[blank]else{!!title}]</code>. Note that referencing a field as a text reference such as <code>{!!caption}</code> returns an empty string for a non-existent or empty caption field. Therefore a check for <code>is[blank]</code> is needed before the <code>else</code> operator</div></p><p>For each title in a shopping list, calculate the total cost of purchasing each item:</p><p><div class="doc-example">
<code>[tag[shopping]] :map[get[quantity]else[0]multiply{!!price}]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></p><p>Get the tags of all tiddlers tagged <code>Widget:</code></p><p><div class="doc-example">
<code>[tag[Widgets]] :map:flat[tagging[]] :and[!is[blank]unique[]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></p><p><div class="doc-icon-block"><div class="doc-block-icon"><svg class="tc-image-tip tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><path d="M64 128.242c35.346 0 64-28.654 64-64 0-35.346-28.654-64-64-64-35.346 0-64 28.654-64 64 0 35.346 28.654 64 64 64zm11.936-36.789c-.624 4.129-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349C54.33 94.05 58.824 95.82 64 95.82c5.175 0 9.67-1.769 11.936-4.366zm0 4.492c-.624 4.13-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349 2.266 2.597 6.76 4.366 11.936 4.366 5.175 0 9.67-1.769 11.936-4.366zm0 4.456c-.624 4.129-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349 2.266 2.597 6.76 4.366 11.936 4.366 5.175 0 9.67-1.769 11.936-4.366zm0 4.492c-.624 4.13-5.73 7.349-11.936 7.349-6.206 0-11.312-3.22-11.936-7.349 2.266 2.597 6.76 4.366 11.936 4.366 5.175 0 9.67-1.769 11.936-4.366zM64.3 24.242c11.618 0 23.699 7.82 23.699 24.2S75.92 71.754 75.92 83.576c0 5.873-5.868 9.26-11.92 9.26s-12.027-3.006-12.027-9.26C51.973 71.147 40 65.47 40 48.442s12.683-24.2 24.301-24.2z" fill-rule="evenodd"></path></svg></div> Without the <code>flat</code> suffix the <code>:map</code> filter run only returns the first result for each input title</div></p><h2 class="">Comparison between <code>:map</code> with and without the <code>flat</code> suffix</h2><p>The <code>:map</code> filter run will return at least as many outputs as given in the input.  By default one input item will result in exactly one output item. When the filter run transforms an input item into an empty result, the output for that item will be an empty string. When the filter run transforms an input item into multiple items, only the first item will appear in the output. This behavior can be overridden by providing the <code>flat</code> suffix. The <code>flat</code> suffix will cause all the items to appear in the output.</p><table><tbody><tr class="evenRow"><td align="center"><code>:map</code></td><td align="center"><code>:map:flat</code></td></tr><tr class="oddRow"><td valign="top"><div class="doc-example">
<code>[range[4]] :map[match[this matches nothing]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td><td valign="top"><div class="doc-example">
<code>[range[4]] :map:flat[match[this matches nothing]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td></tr><tr class="evenRow"><td valign="top"><div class="doc-example">
<code>[range[4]] :map[range&lt;currentTiddler&gt;]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td><td valign="top"><div class="doc-example">
<code>[range[4]] :map:flat[range&lt;currentTiddler&gt;]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td></tr><tr class="oddRow"><td valign="top"><div class="doc-example">
<code>[range[4]] :map[range&lt;currentTiddler&gt;]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td><td valign="top"><div class="doc-example">
<code>[range[4]] :map:flat[range&lt;currentTiddler&gt;first[]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td></tr><tr class="evenRow"><td valign="top"><div class="doc-example">
<code>[range[4]] :map[range&lt;currentTiddler&gt;sum[]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td><td valign="top"><div class="doc-example">
<code>[range[4]] :map:flat[range&lt;currentTiddler&gt;sum[]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td></tr><tr class="oddRow"><td valign="top"><div class="doc-example">
<code>[[1,2,3]] [[4,5]] :map[split[,]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td><td valign="top"><div class="doc-example">
<code>[[1,2,3]] [[4,5]] :map:flat[split[,]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td></tr><tr class="evenRow"><td valign="top"><div class="doc-example">
<code>[[1,2,3]] [[4,5]] :map[split[,]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td><td valign="top"><div class="doc-example">
<code>[[1,2,3]] [[4,5]] :map:flat[split[,]first[]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td></tr></tbody></table><h2 class="">Comparison between <code>:map</code> and <code>:and</code>/<code>+</code> filter run prefixes</h2><p>The functionality of the <code>:map</code> filter run prefix has some overlap with the <code>:and</code> prefix (alias <code>+</code>). They will sometimes return the same results as each other. In at least these cases, the results will be different:</p><ol><li>The <code>:and</code> filter run can modify the number of items (either increase or decrease). The <code>:map</code> run will never alter the number of items.</li><li>The number of items in the <code>:and</code> filter run will also decrease due to <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Dominant%2520Append.html">de-duplication</a>. The <code>:map</code> run will not <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Dominant%2520Append.html">de-duplicate</a>.</li><li>Explicit references to the "currentTiddler" variable will behave differently</li><li>Implicit references to the "currentTiddler" using <a class="tc-tiddlylink tc-tiddlylink-resolves" href="TextReference.html">TextReference</a> will behave differently.</li></ol><table><tbody><tr class="evenRow"><td align="center"><code>:map</code></td><td align="center"><code>:and</code></td></tr><tr class="oddRow"><th colspan="2">results are the same</th></tr><tr class="evenRow"><td valign="top"><div class="doc-example">
<code>[range[5]] :map[add[1]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td><td valign="top"><div class="doc-example">
<code>[range[5]] :and[add[1]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td></tr><tr class="oddRow"><td valign="top"><div class="doc-example">
<code>[range[5]] :map[addsuffix[ hello]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td><td valign="top"><div class="doc-example">
<code>[range[5]] :and[addsuffix[ hello]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td></tr><tr class="evenRow"><td valign="top"><div class="doc-example">
<code>[tag[shopping]] :map[get[quantity]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td><td valign="top"><div class="doc-example">
<code>[tag[shopping]] :and[get[quantity]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td></tr><tr class="oddRow"><th colspan="2">decrease in the number of items</th></tr><tr class="evenRow"><td valign="top"><div class="doc-example">
<code>[range[5]] :map[sum[]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td><td valign="top"><div class="doc-example">
<code>[range[5]] :and[sum[]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td></tr><tr class="oddRow"><td valign="top"><div class="doc-example">
<code>[range[5]] :map[join[,]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td><td valign="top"><div class="doc-example">
<code>[range[5]] :and[join[,]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td></tr><tr class="evenRow"><th colspan="2">increase in the number of items</th></tr><tr class="oddRow"><td valign="top"><div class="doc-example">
<code>[[1,2,3]] [[4,5]] :map[split[,]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td><td valign="top"><div class="doc-example">
<code>[[1,2,3]] [[4,5]] :and[split[,]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td></tr><tr class="evenRow"><th colspan="2">de-duplication</th></tr><tr class="oddRow"><td valign="top"><div class="doc-example">
<code>[range[5]] :map[[hello]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td><td valign="top"><div class="doc-example">
<code>[range[5]] :and[[hello]]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td></tr><tr class="evenRow"><th colspan="2">currentTiddler</th></tr><tr class="oddRow"><td valign="top"><div class="doc-example">
<code>[tag[shopping]] :map[&lt;currentTiddler&gt;]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td><td valign="top"><div class="doc-example">
<code>[tag[shopping]] :and[&lt;currentTiddler&gt;]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td></tr><tr class="evenRow"><td valign="top"><div class="doc-example">
<code>[tag[shopping]] :map[{!!quantity}]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td><td valign="top"><div class="doc-example">
<code>[tag[shopping]] :and[{!!quantity}]</code>


<span class=" tc-reveal">
	<dl>
	<dd><button class="">Essayez</button></dd>
	</dl>
</span>
<span class=" tc-reveal" hidden="true"></span>
</div></td></tr></tbody></table></div>

</div></p>
</section>
</body>
</html>

