<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="generator" content="TiddlyWiki" />
<meta name="tiddlywiki-version" content="5.3.2-prerelease" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="format-detection" content="telephone=no">
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="static.css">
<title>tiddlywiki.files Files: 티들리위키 — 줄 없는 개인 웹 공책</title>
</head>
<body class="tc-body">
<p><div class="tc-static-alert"><div class="tc-static-alert-inner">이 문서는 <a class="tc-tiddlylink-external" href="https://tiddlywiki.com/languages/ko-KR/" rel="noopener noreferrer" target="_blank">https://tiddlywiki.com/languages/ko-KR/</a>에서 티들리위키의 정적 HTML 표현의 일부입니다</div></div>
</p>
<section class="tc-story-river tc-static-story-river">
<p><div class="tc-tiddler-frame tc-tiddler-view-frame tc-tiddler-exists  tc-tagged-TiddlyWikiFolders tc-tagged-TiddlyWiki%20on%20Node.js" data-tags="TiddlyWikiFolders [[TiddlyWiki on Node.js]]" data-tiddler-title="tiddlywiki.files Files" role="article"><div class="tc-tiddler-title">
<div class="tc-titlebar">
<span class="tc-tiddler-controls">
<span class=" tc-reveal"><button aria-expanded="false" aria-label="더 보기" class="tc-btn-invisible" title="더 많은 동작을 봅니다"></button><div class=" tc-reveal" hidden="true"></div></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal"><button aria-label="편집" class="tc-btn-invisible" title="이 티들러를 편집합니다"></button></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal"><button aria-label="닫기" class="tc-btn-invisible" title="이 티들러를 닫습니다"></button></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span>
</span>

<span>

<span class="tc-tiddler-title-icon" style="fill:;">

</span>



<h2 class="tc-title">

tiddlywiki.files Files

</h2>

</span>

</div>

<div class="tc-tiddler-info tc-popup-handle tc-reveal" hidden="true"></div>
</div><div class="tc-reveal"></div><div class=" tc-reveal"><div class="tc-subtitle"><a class="tc-tiddlylink tc-tiddlylink-missing" href=".html"></a> 2021년 11월 14일 오전 10:12</div></div><div class=" tc-reveal"><div class="tc-tags-wrapper"><span class="tc-tag-list-item">


<button aria-expanded="false" class="tc-btn-invisible tc-tag-label" style="background-color:;
fill:#333333;
color:#333333;">
 TiddlyWiki on Node.js
</button>
<span class=" tc-reveal" hidden="true"></span>


</span><span class="tc-tag-list-item">


<button aria-expanded="false" class="tc-btn-invisible tc-tag-label" style="background-color:;
fill:#333333;
color:#333333;">
 TiddlyWikiFolders
</button>
<span class=" tc-reveal" hidden="true"></span>


</span></div></div>






<div class="tc-tiddler-body tc-reveal"><h1 class="">Introduction</h1><p>A <code>tiddlywiki.files</code> JSON file in a sub-folder within <a class="tc-tiddlylink tc-tiddlylink-resolves" href="TiddlyWikiFolders.html">a TiddlyWiki folder</a> overrides the usual logic for recursively scanning the folder for tiddler files. Instead, the <code>tiddlywiki.files</code> file specifies instructions for loading tiddlers from specific files and folders.</p><p>The format of the file is an object with two optional properties:</p><ul><li><strong>tiddlers</strong> - an array of objects describing external files with the ability to override or modify any of the fields read from the file</li><li><strong>directories</strong> - an array of objects describing external directories, a filter determining which files within those directories should be processed, and the ability to override or modify any of the fields read from the file</li></ul><p>Note that significant enhancements to <code>tiddlywiki.files</code> processing were introduced in <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Release%25205.1.14.html">Release 5.1.14</a>.</p><h2 class="">Field overrides</h2><p>Both the <strong>tiddlers</strong> and <strong>directories</strong> sections of <code>tiddlywiki.files</code> files include the ability to override or customise the values of fields with a <code>fields</code> object.</p><p>Each field can be specified as either a <strong>string</strong> or <strong>array</strong> value to be assigned directly to the field, or <a class="tc-tiddlylink tc-tiddlylink-resolves doc-from-version" href="Release%25205.1.14.html"><svg class="tc-image-warning tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><path d="M57.072 11c3.079-5.333 10.777-5.333 13.856 0l55.426 96c3.079 5.333-.77 12-6.928 12H8.574c-6.158 0-10.007-6.667-6.928-12l55.426-96zM64 37c-4.418 0-8 3.582-8 7.994v28.012C56 77.421 59.59 81 64 81c4.418 0 8-3.582 8-7.994V44.994C72 40.579 68.41 37 64 37zm0 67a8 8 0 100-16 8 8 0 000 16z" fill-rule="evenodd"></path></svg> New in: 5.1.14</a> an <strong>object</strong> describing how to generate the value for the field. The object contains the following properties:</p><ul><li><strong>source</strong> - (optional) a string specifying the source value for the field. If not specified, the existing value is used<ul><li><em>filename</em> the filename of the file containing the tiddler</li><li><em>filename-uri-decoded</em> the filename of the file containing the tiddler, with <a class="tc-tiddlylink-external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent" rel="noopener noreferrer" target="_blank">URI decoding</a> applied</li><li><em>basename</em> the filename of the file containing the tiddler without any extension</li><li><em>basename-uri-decoded</em> the filename of the file containing the tiddler without any extension, with <a class="tc-tiddlylink-external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent" rel="noopener noreferrer" target="_blank">URI decoding</a> applied</li><li><em>extname</em> the extension of the filename of the file containing the tiddler</li><li><em>created</em> the creation date/time of the file containing the tiddler</li><li><em>modified</em> the modification date/time of the file containing the tiddler</li><li><a class="tc-tiddlylink tc-tiddlylink-resolves doc-from-version" href="Release%25205.3.0.html"><svg class="tc-image-warning tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><path d="M57.072 11c3.079-5.333 10.777-5.333 13.856 0l55.426 96c3.079 5.333-.77 12-6.928 12H8.574c-6.158 0-10.007-6.667-6.928-12l55.426-96zM64 37c-4.418 0-8 3.582-8 7.994v28.012C56 77.421 59.59 81 64 81c4.418 0 8-3.582 8-7.994V44.994C72 40.579 68.41 37 64 37zm0 67a8 8 0 100-16 8 8 0 000 16z" fill-rule="evenodd"></path></svg> New in: 5.3.0</a> <em>filepath</em> the path of the file containing the tiddler, relative to the <strong>path</strong> property of the directory (only usable in <strong>directories</strong> declarations)</li><li><a class="tc-tiddlylink tc-tiddlylink-resolves doc-from-version" href="Release%25205.3.0.html"><svg class="tc-image-warning tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><path d="M57.072 11c3.079-5.333 10.777-5.333 13.856 0l55.426 96c3.079 5.333-.77 12-6.928 12H8.574c-6.158 0-10.007-6.667-6.928-12l55.426-96zM64 37c-4.418 0-8 3.582-8 7.994v28.012C56 77.421 59.59 81 64 81c4.418 0 8-3.582 8-7.994V44.994C72 40.579 68.41 37 64 37zm0 67a8 8 0 100-16 8 8 0 000 16z" fill-rule="evenodd"></path></svg> New in: 5.3.0</a> <em>subdirectories</em> an array of the subdirectories in the file's path relative, to the <strong>path</strong> property of the directory (only usable in <strong>directories</strong> declarations)</li></ul></li><li><strong>prefix</strong> - (optional) a string to be prepended to the value of the field</li><li><strong>suffix</strong> - (optional) a string to be appended to the value of the field</li></ul><h1 class="">Tiddlers section</h1><p>The file specifications in the <code>tiddlers</code> array support the following properties:</p><ul><li><strong>file</strong>: (required) the absolute or relative path to the file containing the tiddler data (relative paths are interpreted relative to the path of the <code>tiddlywiki.files</code> file)</li><li><strong>isTiddlerFile</strong>: (optional) if <code>true</code>, the file will be treated as a <a class="tc-tiddlylink tc-tiddlylink-resolves" href="TiddlerFiles.html">tiddler file</a> and deserialised to extract the tiddlers. Otherwise, the raw content of the file is assigned to the <code>text</code> field without any parsing</li><li><strong>fields</strong>: (optional) an object containing values that override or customise the fields provided in the tiddler file (see above)</li><li><strong>prefix</strong> &amp; <strong>suffix</strong>: (optional) strings to be prefixed and suffixed to the tiddler <code>text</code> field<blockquote><div>Note that providing a <strong>prefix</strong> here is equivalent to setting the <code>text</code> field of the <strong>fields</strong> object to <code>{"prefix":"&lt;prefixvalue&gt;"}</code>.</div></blockquote></li></ul><h1 class="">Directories section</h1><p>Directory specifications in the <code>directories</code> array may take the following forms:</p><ul><li>a <strong>string</strong> literal, specifying the absolute or relative path to the directory containing the tiddler files (relative paths are interpreted relative to the path of the <code>tiddlywiki.files</code> file). The directory is recursively searched for tiddler files</li><li><a class="tc-tiddlylink tc-tiddlylink-resolves doc-from-version" href="Release%25205.1.14.html"><svg class="tc-image-warning tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><path d="M57.072 11c3.079-5.333 10.777-5.333 13.856 0l55.426 96c3.079 5.333-.77 12-6.928 12H8.574c-6.158 0-10.007-6.667-6.928-12l55.426-96zM64 37c-4.418 0-8 3.582-8 7.994v28.012C56 77.421 59.59 81 64 81c4.418 0 8-3.582 8-7.994V44.994C72 40.579 68.41 37 64 37zm0 67a8 8 0 100-16 8 8 0 000 16z" fill-rule="evenodd"></path></svg> New in: 5.1.14</a> an <strong>object</strong> with the following properties:<ul><li><strong>path</strong> - (required) the absolute or relative path to the directory containing the tiddler files (relative paths are interpreted relative to the path of the <code>tiddlywiki.files</code> file). Note that by default the directory is not recursively searched; sub-directories are ignored unless the <em>searchSubdirectories</em> flag is set to <code>true</code> (see below).</li><li><strong>filesRegExp</strong> - (optional) a <a class="tc-tiddlylink-external" href="https://developer.mozilla.org/en/docs/Web/JavaScript/Guide/Regular_Expressions" rel="noopener noreferrer" target="_blank">regular expression</a> that matches the filenames of the files that should be processed within the directory</li><li><strong>isTiddlerFile</strong> - (required) if <code>true</code>, the file will be treated as a <a class="tc-tiddlylink tc-tiddlylink-resolves" href="TiddlerFiles.html">tiddler file</a> and deserialised to extract the tiddlers. Otherwise, the raw content of the file is assigned to the <code>text</code> field without any parsing</li><li><strong>isEditableFile</strong> - <a class="tc-tiddlylink tc-tiddlylink-resolves doc-from-version" href="Release%25205.1.23.html"><svg class="tc-image-warning tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><path d="M57.072 11c3.079-5.333 10.777-5.333 13.856 0l55.426 96c3.079 5.333-.77 12-6.928 12H8.574c-6.158 0-10.007-6.667-6.928-12l55.426-96zM64 37c-4.418 0-8 3.582-8 7.994v28.012C56 77.421 59.59 81 64 81c4.418 0 8-3.582 8-7.994V44.994C72 40.579 68.41 37 64 37zm0 67a8 8 0 100-16 8 8 0 000 16z" fill-rule="evenodd"></path></svg> New in: 5.1.23</a> (optional) if <code>true</code>, changes to the tiddler be saved back to the original file. The tiddler will be saved back to the original filepath as long as it does not generate a result from the <a class="tc-tiddlylink tc-tiddlylink-missing" href="%2524%253A%252Fconfig%252FFileSystemPath.html">$:/config/FileSystemPath</a> filters, which will override the final filepath generated if a result is returned from a filter.</li><li><strong>searchSubdirectories</strong> - <a class="tc-tiddlylink tc-tiddlylink-resolves doc-from-version" href="Release%25205.1.23.html"><svg class="tc-image-warning tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt"><path d="M57.072 11c3.079-5.333 10.777-5.333 13.856 0l55.426 96c3.079 5.333-.77 12-6.928 12H8.574c-6.158 0-10.007-6.667-6.928-12l55.426-96zM64 37c-4.418 0-8 3.582-8 7.994v28.012C56 77.421 59.59 81 64 81c4.418 0 8-3.582 8-7.994V44.994C72 40.579 68.41 37 64 37zm0 67a8 8 0 100-16 8 8 0 000 16z" fill-rule="evenodd"></path></svg> New in: 5.1.23</a> (optional) if <code>true</code>, all subdirectories of the <em>path</em> are searched recursively for files that match the (optional) <em>filesRegExp</em>. If no <em>filesRegExp</em> is provided, all files in all subdirectories of the <em>path</em> are loaded. Tiddler titles generated via the <em>source</em> attribute <em>filename</em> (see above) will only include the filename, not any of the subdirectories of the path. If this results in multiple files with loaded with the same tiddler title, then only the last file loaded under that tiddler title will be in memory. In order to prevent this, you can use the <em>filepath</em> attribute instead of <em>filename</em>. Alternately, you can include multiple directory objects and customise the title field with a <em>prefix</em> or <em>suffix</em> alongside the <em>source</em> attribute.</li><li><strong>fields</strong> - (required) an object containing values that override or customise the fields provided in the tiddler file (see above)</li></ul></li></ul><p>Fields can also be overridden for particular files by creating a file with the same name plus the suffix <code>.meta</code> – see <a class="tc-tiddlylink tc-tiddlylink-resolves" href="TiddlerFiles.html">TiddlerFiles</a>.</p><h1 class="">Examples</h1><p>These example <code>tiddlywiki.files</code> must be placed in their own sub-directory of the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="TiddlyWikiFolders.html">wiki folder</a>.</p><p>There are also several examples of <code>tiddlywiki.files</code> files in the main <a class="tc-tiddlylink-external" href="https://github.com/Jermolene/TiddlyWiki5" rel="noopener noreferrer" target="_blank">TiddlyWiki 5 GitHub repository</a>. </p><h2 class="">Importing a folder of PDFs</h2><p>This example retrieves all the files with the extension <code>.pdf</code> from a folder specified by a relative path. This path starts with "../../../" indicating 3 directory levels above the folder holding this config file. Each tiddler is set up for <a class="tc-tiddlylink tc-tiddlylink-resolves" href="LazyLoading.html">LazyLoading</a> with the following fields:</p><ul><li><strong>title</strong> - set to the URI decoded base filename of the PDF file. <a class="tc-tiddlylink-external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent" rel="noopener noreferrer" target="_blank">URI decoding</a> allows characters like "/" to be included in titles by URI encoding them as "%2F"</li><li><strong>created</strong> - set to the creation date/time of the PDF file</li><li><strong>modified</strong> - set to the modification date/time of the PDF file</li><li><strong>type</strong> - set to <code>application/pdf</code></li><li><strong>tags</strong> - set to <code>$:/tags/AttachedFile</code></li><li><strong>text</strong> - set to an empty string</li><li><strong>_canonical_uri</strong> - set to the string "pdfs/" concatenated with the filename</li></ul><pre><code>{
    "directories": [
        {
            "path": "../../../input/pdfs",
            "filesRegExp": "^.*\\.pdf$",
            "isTiddlerFile": false,
            "fields": {
                "title": {"source": "basename-uri-decoded"},
                "created": {"source": "created"},
                "modified": {"source": "modified"},
                "type": "application/pdf",
                "tags": ["$:/tags/AttachedFile"],
                "text": "",
                "_canonical_uri": {"source": "filename", "prefix": "pdfs/"}
            }
        }
    ]
}</code></pre><h2 class="">Importing a folder of text files</h2><p>This example retrieves all the files with the extension <code>.txt</code> from a folder specified by a relative path. This folder is within the wiki's base directory, and the current config file is in a directory within the wiki's "tiddlers/" directory. So, in this case the path starts with "../../" to traverse upwards two directory levels, and then down into the "externalnotes/" directory. Each tiddler is set up with the following fields:</p><ul><li><strong>title</strong> - set to the URI decoded base filename of the text file. <a class="tc-tiddlylink-external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent" rel="noopener noreferrer" target="_blank">URI decoding</a> allows characters like "/" to be included in titles by URI encoding them as "%2F"</li><li><strong>created</strong> - set to the creation date/time of the text file</li><li><strong>modified</strong> - set to the modification date/time of the text file</li><li><strong>type</strong> - set to <code>text/plain</code></li><li><strong>tags</strong> - set to <code>[[note]] [[externalnote]] [[.txt]]</code> (using array notation)</li><li><strong>text</strong> - not set, thus the content of the file is loaded as the text field</li></ul><pre><code>{
    "directories": [
        {
            "path": "../../externalnotes",
            "filesRegExp": ".+\\.txt",
            "isTiddlerFile": false,
            "isEditableFile": true,
            "fields": {
                "title": {"source": "basename-uri-decoded"},
                "created": {"source": "created"},
                "modified": {"source": "modified"},
                "type": "text/plain",
                "tags": ["note", "externalnote", ".txt"]
            }
        }
  ]
}</code></pre><p>This will load all text files in the <code>../../externalnotes/</code> directory into the wiki as individual tiddlers. These can be a collection of snippets in various markup-languages. Then, the <code>type</code> field of each of these tiddlers can be changed to match their languages For example, "text/vnd.tiddlywiki" for wikitext, or "text/markdown" for markdown files. Then, using <a class="tc-tiddlylink tc-tiddlylink-missing" href="%2524%253A%252Fconfig%252FFileSystemPaths.html">$:/config/FileSystemPaths</a> and <a class="tc-tiddlylink tc-tiddlylink-missing" href="%2524%253A%252Fconfig%252FFileSystemExtentions.html">$:/config/FileSystemExtentions</a> tiddlers with the following lines we can cause any changes to these tiddlers to be saved back to the directory they started from, and also as "*.txt" files with accompanying "*.txt.meta" files. These meta files will be generated as required, and will then over-ride any fields generated from the config <code>tiddlywiki.files</code> file (such as the tiddler's <code>type</code> field) when the server is restarted.</p><p>From the examples in <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Customising%2520Tiddler%2520File%2520Naming.html">Customising Tiddler File Naming</a> we see that the final <code>[!tag[externalnote]addprefix[wiki/]]</code> filter in the <a class="tc-tiddlylink tc-tiddlylink-missing" href="%2524%253A%252Fconfig%252FFileSystemPaths.html">$:/config/FileSystemPaths</a> tiddler excludes all tiddlers tagged with <code>externalnotes</code> (that have not matched an earlier filter). These tiddlers have their filepath retrieved from the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="%2524%253A%252Fconfig%252FOriginalTiddlerPaths.html">$:/config/OriginalTiddlerPaths</a> generated upon boot startup.</p><p>Then, the <code>[tag[.txt]then[.txt]]</code> filter in the <a class="tc-tiddlylink tc-tiddlylink-missing" href="%2524%253A%252Fconfig%252FFileSystemExtensions.html">$:/config/FileSystemExtensions</a> tiddler forces all these tiddlers to be saved back to disk as *.txt and accompanying *.txt.meta files (overriding the normal tiddler-type to file-type mapping). In this case, allowing the snippets of Tiddlywiki wikitext or markdown-text to be saved back to "text" *.txt files.</p><h2 class="">Importing and auto-tagging images</h2><p>This example imports all the image files in the <code>files</code> directory and all its subdirectories as external-image tiddlers, and tags them based on their filepath. Each tiddler is set up with the following fields:</p><ul><li><strong>title</strong> - set to the URI decoded base filename of the text file</li><li><strong>created</strong> - set to the creation date/time of the text file</li><li><strong>modified</strong> - set to the modification date/time of the text file</li><li><strong>type</strong> - set to <code>image/jpeg</code>. There is currently no way to infer the correct <a class="tc-tiddlylink tc-tiddlylink-resolves" href="ContentType.html">ContentType</a> of the image tiddler from the file, but <code>image/jpeg</code> tiddlers should render correctly even with png or gif images. As an alternative, you could create separate definitions for jpg, png, and gif files with the <code>image/jpeg</code>, <code>image/png</code>, and <code>image/gif</code> types respectively.</li><li><strong>tags</strong> - generated based on the path of the image relative to the parent directory (<code>files</code> in this case). Eg, images in <code>files/photos</code> will be tagged with <code>photos</code>, those in <code>files/photos/family</code> will be tagged with both <code>photos</code> and <code>family</code>, and those in the root <code>files</code> directory will have no tags.</li><li><strong>text</strong> - set to an empty string</li><li><strong>_canonical_uri</strong> - set to the full filepath of the image relative to the wiki root</li></ul><pre><code>{
    "directories": [
        {
            "path": "../../files/",
            "filesRegExp": "^.*\\.(?:jpg|jpeg|png|gif)$",
            "isTiddlerFile": false,
	        "searchSubdirectories": true,
            "fields": {
                "title": {"source": "basename-uri-decoded"},
                "created": {"source": "created"},
                "modified": {"source": "modified"},
                "type": "image/jpeg",
                "tags": { "source": "subdirectories" },
                "text": "",
                "_canonical_uri": { "source": "filepath", "prefix": "files/" }
            }
        }
    ]
}</code></pre></div>

</div></p>
</section>
</body>
</html>

